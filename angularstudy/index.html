<!DOCTYPE html>
<html ng-app="listaTelefonica">
  <meta charset="UTF-8">
  <head>
    <meta charset="utf-8">
    <title>Lista Telefonica!</title>

    <link rel="stylesheet" href="lib/bootstrap/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/app.css">

    <script src="lib/angular/angular.js"></script>

    <script src="lib/angular/angular-messages.js"></script>
    <script type="text/javascript" src="js/app.js"></script>

    <script src="js/controllers/listaTelefonicaController.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/services/contatosAPIService.js"></script>
    <script type="text/javascript" src="js/services/operadorasAPIService.js"></script>
    <script type="text/javascript" src="value/config.js"></script>
    <script type="text/javascript" src="js/services/serialGeneratorService.js"></script>
    <script type="text/javascript" src="js/config/serialGeneratorConfig.js"></script>

    <script type="text/javascript" src="js/filters/nomePessoaFilter.js"></script>

  </head>
  <body>
    <div class="jumbotron" ng-controller="listaTelefonicaController">

      <h3>{{app}}</h3>

      <input class="form-control" type="text" ng-model="criterioDeBusca" placeholder="Oque você esta buscando?">
      <table class="table ">
        <tr>

          <th></th>
          <th>Serial</th>
          <th><a href="#" ng-click="ordenarPor('nome')">Nome</a></th>
          <th><a href="#" ng-click="ordenarPor('telefone')">Telefone</a></th>
          <th><a href="#" ng-click="ordenarPor('operadora.nome')">Operadora</a></th>
          <th><a href="#" ng-click="ordenarPor('data')">Data</a></th>
        </tr>
        <tr ng-class="{'negrito selecionado' : contato.selecionado}"
        ng-repeat="contato in contatos | filter:criterioDeBusca  | limitTo:6 | orderBy:criterioDeOrdenacao:direcaoOrdenacao">

          <td><input type="checkbox" ng-model="contato.selecionado"></td>
          <td>{{contato.serial}}</td>
          <td>{{contato.nome | nomePessoa}}</td>
          <td>{{contato.telefone}}</td>
          <td>{{contato.operadora.nome}}</td>
          <td>{{contato.data | date:'dd/MM/yy HH:mm'}}</td>
        </tr>
      </table>

      <hr/>


      <form name="contatoForm">

        <input class="form-control" type="text" name="nome"
        ng-model="contato.nome" placeholder="Nome" ng-required="true" ng-minlength="3">

        <input class="form-control" type="text" name="telefone"
        ng-model="contato.telefone" placeholder="Telefone" ng-required="true" ng-pattern="/^\d{4,5}-\d{4}$/">

        <select class="form-control" ng-model="contato.operadora"
        ng-options="operadora.nome + ' ( ' + (operadora.preco | currency) + ' ) ' group by operadora.categoria for operadora in operadoras | orderBy:'nome'">
          <option value="">Selecione uma operadora</option>
        </select>


      </form>

      <div  ng-messages="contatoForm.nome.$error" ng-show="contatoForm.nome.$dirty">
        <div  class="alert alert-danger" ng-message="required">
          Por favor, preencha o nome.
        </div>
        <div class="alert alert-danger" ng-message="minlength">
          Campo nome deve ter no mínimo 3 caracteres.
        </div>
      </div>

      <div ng-messages="contatoForm.telefone.$error" ng-show="contatoForm.telefone.$dirty">
        <div class="alert alert-danger" ng-message="required">
          Por favor, preencha o telefone.
        </div>
        <div class="alert alert-danger" ng-message="pattern">
          Formato de telefone incorreto, DDDDD-DDDD.
        </div>
      </div>



      <button class="btn btn-primary btn-block" type="button"
      ng-click="addContato(contato)"
      ng-disabled="contatoForm.$invalid" >Add Contato</button>

      <button class="btn btn-danger btn-block" type="button"
      ng-click="delContatos(contatos)"
      ng-if="!isContatosSelecionados(contatos)" >Delete Contatos</button>


    </div>

    <div class="" ng-include="'view/footer.html'">

    </div>
  </body>
</html>
